"use strict";(self["webpackChunksupermail"]=self["webpackChunksupermail"]||[]).push([[558],{2663:function(t,e,s){s.r(e),s.d(e,{default:function(){return D}});var o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"home"}},[e("nav-bar",{staticClass:"home-nav"},[e("div",{attrs:{slot:"center"},slot:"center"},[t._v("购物街")])]),e("div",{ref:"homeContent",staticClass:"homeContent",on:{scroll:function(e){return t.contentScroll(e)}}},[e("home-swiper",{attrs:{banners:t.banners}}),e("recommend-view",{attrs:{recommends:t.recommend}}),e("feature-view"),e("tab-control",{ref:"tabControl",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabClick}}),e("goods-list",{attrs:{goods:t.showGoods}})],1),e("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isShowBackTop,expression:"isShowBackTop"}],nativeOn:{click:function(e){return t.backTop()}}})],1)},r=[],n=function(){var t=this,e=t._self._c;return e("swiper",t._l(t.banners,(function(s){return e("swiper-item",{key:s.sort},[e("a",{attrs:{href:s.link}},[e("img",{attrs:{src:s.image,alt:""},on:{load:function(e){return t.imageLoad()}}})])])})),1)},i=[],a=s(2789),l={name:"HomeSwiper",props:{banners:{type:Array,default(){return[]}}},data(){return{isLoad:!1}},components:{Swiper:a.k,SwiperItem:a.t},methods:{imageLoad(){this.isLoad||(this.$emit("swiperImageLoaded"),this.isLoad=!0)}}},c=l,u=s(1001),d=(0,u.Z)(c,n,i,!1,null,null,null),m=d.exports,h=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"recommend"}},t._l(t.recommends,(function(s){return e("div",{key:s.sort,staticClass:"recommend-item"},[e("a",{attrs:{href:s.link}},[e("img",{attrs:{src:s.image,alt:""}}),e("div",[t._v(t._s(s.title))])])])})),0)},p=[],f={name:"RecommendView",props:{recommends:{type:Array,default(){return[]}}}},v=f,g=(0,u.Z)(v,h,p,!1,null,null,null),w=g.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"feature"},[e("h2",[t._v("本周流行")]),e("div",{staticClass:"content"},t._l(t.list,(function(s,o){return e("div",{key:s,staticClass:"item",class:t.itemGener(o+1)},[e("div",{staticClass:"pic"}),e("div",{staticClass:"text"},[t._v(t._s(s))])])})),0)])},b=[],C={name:"FeatureView",data(){return{list:["霸街长袖裙","时尚懒人套装","微胖遮肉穿搭","降温保暖鞋","颜值爆表套装裙","小心机v领","万圣节必备口红","软萌暖心包包"]}},computed:{itemGener(){return function(t){return`item${t}`}}}},_=C,y=(0,u.Z)(_,k,b,!1,null,null,null),T=y.exports,x=s(3388),H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tab-control"},t._l(t.titles,(function(s,o){return e("div",{key:s,staticClass:"tab-control-item",class:{active:o===t.currentIndex},on:{click:function(e){return t.itemClick(o)}}},[e("span",[t._v(t._s(s))])])})),0)},G=[],L={name:"TabControl",props:{titles:{type:Array,default(){return[]}}},data(){return{currentIndex:0}},methods:{itemClick(t){this.currentIndex=t,this.$emit("tabClick",t)}}},$=L,S=(0,u.Z)($,H,G,!1,null,null,null),I=S.exports,Z=s(7241),M=s(7707);function A(){return(0,M.W)({url:"/home/multidata"})}function B(t,e){return(0,M.W)({url:"/home/data",params:{type:t,page:e}})}var V=s(4493),F=s(6280),N={name:"Home",data(){return{banners:[],dKeyword:[],keywords:[],recommend:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",isFixed:!1}},components:{NavBar:x.Z,HomeSwiper:m,RecommendView:w,FeatureView:T,TabControl:I,GoodsList:Z.Z},computed:{showGoods(){return this.goods[this.currentType].list}},created(){this.getHomeMultidata(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell"),this.loadMore=(0,V.l$)(this.loadMore,5e3)},mounted(){},deactivated(){this.$bus.$off("itemImageLoad",this.itemImageLoad)},mixins:[F.s],methods:{getHomeMultidata(){A().then((t=>{this.banners=t.data.banner.list,this.recommend=t.data.recommend.list}))},getHomeGoods(t){const e=this.goods[t].page+1;B(t,e).then((e=>{this.goods[t].list.push(...e.data.list),this.goods[t].page++})).catch((t=>{this.$toast.show("请求数据失败"),console.log(t),setTimeout((()=>{}),2*this.DELAY)}))},tabClick(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}},contentScroll(){const t=this.$refs.homeContent;t.scrollHeight-(t.scrollTop+t.clientHeight)<=50&&this.loadMore(),this.isShowBackTop=this.$refs.homeContent.scrollTop>=50},loadMore(){this.getHomeGoods(this.currentType)},backTop(){this.$refs.homeContent.scrollTo(0,0,{behavior:"smooth"})}}},R=N,W=(0,u.Z)(R,o,r,!1,null,"43650652",null),D=W.exports}}]);
//# sourceMappingURL=558.f0ad5665.js.map